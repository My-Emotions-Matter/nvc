import &ArtSuite

class Status extends ApplicationState

  @persistant()

  set: (key, status) ->
    @models.history.save()
    @setState key, bound 1, status + .5 | 0, 5

  @getter
    average: ->
      count = 0
      sum = reduce a, b in @state inject 0 with count++; a + b
      if count > 0
        sum / count
